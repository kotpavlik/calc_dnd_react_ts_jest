{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { setErrorApp } from \"./app_reducer\";\nconst initialState = {\n  display_value: '0',\n  buttons: [{\n    id: 1,\n    val: '1'\n  }, {\n    id: 2,\n    val: '2'\n  }, {\n    id: 3,\n    val: '3'\n  }, {\n    id: 4,\n    val: '4'\n  }, {\n    id: 5,\n    val: '5'\n  }, {\n    id: 6,\n    val: '6'\n  }, {\n    id: 7,\n    val: '7'\n  }, {\n    id: 8,\n    val: '8'\n  }, {\n    id: 9,\n    val: '9'\n  }, {\n    id: 0,\n    val: '0'\n  }, {\n    id: 10,\n    val: '.'\n  }],\n  operators: [{\n    id: 11,\n    val: '/'\n  }, {\n    id: 12,\n    val: '*'\n  }, {\n    id: 13,\n    val: '+'\n  }, {\n    id: 14,\n    val: '-'\n  }, {\n    id: 15,\n    val: '='\n  }],\n  choise_operator_id: null,\n  first_val: null,\n  second_val: null,\n  equal_val: null\n};\nexport const CalcThunk = createAsyncThunk('calculator/CalcThunk', (val, _ref) => {\n  let {\n    getState,\n    dispatch\n  } = _ref;\n  try {\n    const {\n      calc\n    } = getState();\n    calc.display_value.length > 8 ? dispatch(setErrorApp({\n      error: 'dispaly a long'\n    })) : dispatch(displayShow({\n      val\n    }));\n    dispatch(setEqual({\n      setEq: null\n    }));\n  } catch (e) {\n    // const err = e as Error | AxiosError\n    // handleError(err, thunkAPI.dispatch)\n    // thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n  }\n});\nexport const MathCoutingThunk = createAsyncThunk('calculator/MathCoutingThunk', (_ref2, _ref3) => {\n  let {\n    id,\n    first_val\n  } = _ref2;\n  let {\n    getState,\n    dispatch\n  } = _ref3;\n  try {\n    dispatch(operator_counting({\n      id,\n      first_val\n    }));\n    dispatch(displayShow({\n      val: null\n    }));\n  } catch (e) {\n    // const err = e as Error | AxiosError\n    // handleError(err, thunkAPI.dispatch)\n    // thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n  }\n});\nexport const EqualThunk = createAsyncThunk('calculator/EqualThunk', (_ref4, _ref5) => {\n  let {\n    display_value,\n    choise_operator_id,\n    first_val\n  } = _ref4;\n  let {\n    getState,\n    dispatch\n  } = _ref5;\n  try {\n    dispatch(CalcThunk(null));\n    let equal = 0;\n    if (choise_operator_id === 11) equal = first_val / Number(display_value);\n    if (choise_operator_id === 12) equal = first_val * Number(display_value);\n    if (choise_operator_id === 13) equal = first_val + Number(display_value);\n    if (choise_operator_id === 14) equal = first_val - Number(display_value);\n    if (display_value === '0' && choise_operator_id === 11) {\n      dispatch(setErrorApp({\n        error: 'What\\'s up man? Do you really want to do this ? '\n      }));\n      dispatch(CalcThunk(null));\n    } else {\n      Number.isInteger(equal) ? dispatch(CalcThunk(equal.toString())) : dispatch(CalcThunk(equal.toFixed(2)));\n    }\n    dispatch(setEqual({\n      setEq: equal\n    }));\n  } catch (e) {\n    // const err = e as Error | AxiosError\n    // handleError(err, thunkAPI.dispatch)\n    // thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n  }\n});\nconst slice = createSlice({\n  name: 'calculator',\n  initialState,\n  reducers: {\n    displayShow(state, action) {\n      console.log(state.equal_val);\n      if (state.equal_val !== null) {\n        state.display_value = action.payload.val;\n      }\n      if (action.payload.val === null) {\n        state.display_value = '0';\n      } else {\n        state.display_value = action.payload.val !== '.' && state.display_value === '0' ? action.payload.val : state.display_value + action.payload.val;\n      }\n    },\n    operator_counting(state, action) {\n      state.first_val = action.payload.first_val;\n      state.choise_operator_id = action.payload.id;\n    },\n    setEqual(state, action) {\n      console.log(action.payload.setEq);\n      state.equal_val = action.payload.setEq;\n    }\n  }\n});\nexport const CalculatorReducer = slice.reducer;\nexport const {\n  operator_counting,\n  displayShow,\n  setEqual\n} = slice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","setErrorApp","initialState","display_value","buttons","id","val","operators","choise_operator_id","first_val","second_val","equal_val","CalcThunk","_ref","getState","dispatch","calc","length","error","displayShow","setEqual","setEq","e","MathCoutingThunk","_ref2","_ref3","operator_counting","EqualThunk","_ref4","_ref5","equal","Number","isInteger","toString","toFixed","slice","name","reducers","state","action","console","log","payload","CalculatorReducer","reducer","actions"],"sources":["/Users/macbook/calculator_dnd/calc_dnd/src/state_manager/reducers/calc_reducer.ts"],"sourcesContent":["import { stat } from 'fs';\nimport { PayloadAction, createAsyncThunk, createSlice } from \"@reduxjs/toolkit\"\nimport { setErrorApp } from \"./app_reducer\"\nimport { AppRootStateType } from \"../store\"\n\ntype MathType = {\n    id: number\n    first_val: number\n    choise_operator_id?: number | null\n\n}\ntype EqualType = {\n    display_value: string\n    choise_operator_id: number | null\n    first_val: number | null\n}\ntype button = {\n    id: number\n    val: string\n}\nexport type initialStateType = {\n    display_value: string | null\n    buttons: Array<button>\n    operators: Array<button>\n    choise_operator_id: number | null\n    first_val: number | null\n    second_val: number | null,\n    equal_val: number | null\n}\n\nconst initialState: initialStateType = {\n    display_value: '0',\n    buttons: [\n        { id: 1, val: '1' },\n        { id: 2, val: '2' },\n        { id: 3, val: '3' },\n        { id: 4, val: '4' },\n        { id: 5, val: '5' },\n        { id: 6, val: '6' },\n        { id: 7, val: '7' },\n        { id: 8, val: '8' },\n        { id: 9, val: '9' },\n        { id: 0, val: '0' },\n        { id: 10, val: '.' }\n    ],\n    operators: [\n        { id: 11, val: '/' },\n        { id: 12, val: '*' },\n        { id: 13, val: '+' },\n        { id: 14, val: '-' },\n        { id: 15, val: '=' }\n    ],\n    choise_operator_id: null,\n    first_val: null,\n    second_val: null,\n    equal_val: null\n}\n\n\nexport const CalcThunk = createAsyncThunk('calculator/CalcThunk', (val: string | null, { getState, dispatch }) => {\n    try {\n        const { calc } = getState() as AppRootStateType\n\n        calc.display_value!.length > 8 ? dispatch(setErrorApp({ error: 'dispaly a long' })) : dispatch(displayShow({ val }))\n        dispatch(setEqual({ setEq: null }))\n    }\n    catch (e) {\n        // const err = e as Error | AxiosError\n        // handleError(err, thunkAPI.dispatch)\n        // thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n    }\n})\n\nexport const MathCoutingThunk = createAsyncThunk('calculator/MathCoutingThunk',\n    ({ id, first_val }: MathType, { getState, dispatch }) => {\n        try {\n            dispatch(operator_counting({ id, first_val }))\n            dispatch(displayShow({ val: null }))\n        }\n        catch (e) {\n            // const err = e as Error | AxiosError\n            // handleError(err, thunkAPI.dispatch)\n            // thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n        }\n    })\n\nexport const EqualThunk = createAsyncThunk('calculator/EqualThunk',\n    ({ display_value, choise_operator_id, first_val }: EqualType, { getState, dispatch }) => {\n        try {\n            dispatch(CalcThunk(null))\n            let equal = 0\n            if (choise_operator_id === 11) equal = first_val! / Number(display_value)\n            if (choise_operator_id === 12) equal = first_val! * Number(display_value)\n            if (choise_operator_id === 13) equal = first_val! + Number(display_value)\n            if (choise_operator_id === 14) equal = first_val! - Number(display_value)\n            if (display_value === '0' && choise_operator_id === 11) {\n                dispatch(setErrorApp({\n                    error: 'What\\'s up man? Do you really want to do this ? '\n                }))\n                dispatch(CalcThunk(null))\n            } else {\n                Number.isInteger(equal) ? dispatch(CalcThunk(equal.toString())) : dispatch(CalcThunk(equal.toFixed(2)))\n            }\n            dispatch(setEqual({ setEq: equal }))\n\n        }\n        catch (e) {\n            // const err = e as Error | AxiosError\n            // handleError(err, thunkAPI.dispatch)\n            // thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n        }\n    })\n\nconst slice = createSlice({\n    name: 'calculator',\n    initialState,\n    reducers: {\n        displayShow(state, action: PayloadAction<{ val: string | null }>) {\n            console.log(state.equal_val);\n\n            if (state.equal_val !== null) { state.display_value = action.payload.val }\n            if (action.payload.val === null) { state.display_value = '0' }\n            else {\n                state.display_value = action.payload.val !== '.' &&\n                    state.display_value === '0'\n                    ? action.payload.val\n                    : state.display_value! + action.payload.val\n\n            }\n        },\n        operator_counting(state, action: PayloadAction<{ id: number, first_val: number }>) {\n            state.first_val = action.payload.first_val\n            state.choise_operator_id = action.payload.id\n        },\n        setEqual(state, action: PayloadAction<{ setEq: number | null }>) {\n            console.log(action.payload.setEq);\n            state.equal_val = action.payload.setEq\n        }\n    }\n})\n\nexport const CalculatorReducer = slice.reducer\nexport const { operator_counting, displayShow, setEqual } = slice.actions\n\nexport type CalcActionsType = MathCountType | DisplayShowType | SetEqualType\nexport type MathCountType = ReturnType<typeof operator_counting>\nexport type DisplayShowType = ReturnType<typeof displayShow>\nexport type SetEqualType = ReturnType<typeof setEqual>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}