{"ast":null,"code":"import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import{setErrorApp}from\"./app_reducer\";var initialState={display_value:'0',buttons:[{id:1,val:'1'},{id:2,val:'2'},{id:3,val:'3'},{id:4,val:'4'},{id:5,val:'5'},{id:6,val:'6'},{id:7,val:'7'},{id:8,val:'8'},{id:9,val:'9'},{id:0,val:'0'},{id:10,val:'.'}],operators:[{id:11,val:'/'},{id:12,val:'*'},{id:13,val:'+'},{id:14,val:'-'},{id:15,val:'='}],choise_operator_id:null,first_val:null,second_val:null,equal_val:null};export var CalcThunk=createAsyncThunk('calculator/CalcThunk',function(val,_ref){var getState=_ref.getState,dispatch=_ref.dispatch;try{var _ref2=getState(),calc=_ref2.calc;calc.display_value.length>8?dispatch(setErrorApp({error:'dispaly a long'})):dispatch(displayShow({val:val}));dispatch(setEqual({setEq:null}));}catch(e){// const err = e as Error | AxiosError\n// handleError(err, thunkAPI.dispatch)\n// thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n}});export var MathCoutingThunk=createAsyncThunk('calculator/MathCoutingThunk',function(_ref3,_ref4){var id=_ref3.id,first_val=_ref3.first_val;var getState=_ref4.getState,dispatch=_ref4.dispatch;try{dispatch(operator_counting({id:id,first_val:first_val}));dispatch(displayShow({val:null}));}catch(e){// const err = e as Error | AxiosError\n// handleError(err, thunkAPI.dispatch)\n// thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n}});export var EqualThunk=createAsyncThunk('calculator/EqualThunk',function(_ref5,_ref6){var display_value=_ref5.display_value,choise_operator_id=_ref5.choise_operator_id,first_val=_ref5.first_val;var getState=_ref6.getState,dispatch=_ref6.dispatch;try{dispatch(CalcThunk(null));var equal=0;if(choise_operator_id===11)equal=first_val/Number(display_value);if(choise_operator_id===12)equal=first_val*Number(display_value);if(choise_operator_id===13)equal=first_val+Number(display_value);if(choise_operator_id===14)equal=first_val-Number(display_value);if(display_value==='0'&&choise_operator_id===11){dispatch(setErrorApp({error:'What\\'s up man? Do you really want to do this ? '}));dispatch(CalcThunk(null));}else{Number.isInteger(equal)?dispatch(CalcThunk(equal.toString())):dispatch(CalcThunk(equal.toFixed(2)));}dispatch(setEqual({setEq:equal}));}catch(e){// const err = e as Error | AxiosError\n// handleError(err, thunkAPI.dispatch)\n// thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n}});var slice=createSlice({name:'calculator',initialState:initialState,reducers:{displayShow:function displayShow(state,action){console.log(state.equal_val);console.log(action.payload.val);if(action.payload.val===null){state.display_value='0';}else{if(state.equal_val!==null){state.display_value=action.payload.val;}else{state.display_value=action.payload.val!=='.'&&state.display_value==='0'?action.payload.val:state.display_value+action.payload.val;}}},operator_counting:function operator_counting(state,action){state.first_val=action.payload.first_val;state.choise_operator_id=action.payload.id;},setEqual:function setEqual(state,action){console.log(action.payload.setEq);state.equal_val=action.payload.setEq;}}});export var CalculatorReducer=slice.reducer;var _slice$actions=slice.actions,operator_counting=_slice$actions.operator_counting,displayShow=_slice$actions.displayShow,setEqual=_slice$actions.setEqual;export{operator_counting,displayShow,setEqual};","map":{"version":3,"names":["createAsyncThunk","createSlice","setErrorApp","initialState","display_value","buttons","id","val","operators","choise_operator_id","first_val","second_val","equal_val","CalcThunk","_ref","getState","dispatch","_ref2","calc","length","error","displayShow","setEqual","setEq","e","MathCoutingThunk","_ref3","_ref4","operator_counting","EqualThunk","_ref5","_ref6","equal","Number","isInteger","toString","toFixed","slice","name","reducers","state","action","console","log","payload","CalculatorReducer","reducer","_slice$actions","actions"],"sources":["/Users/macbook/calculator_dnd/calc_dnd/src/state_manager/reducers/calc_reducer.ts"],"sourcesContent":["\nimport { PayloadAction, createAsyncThunk, createSlice } from \"@reduxjs/toolkit\"\nimport { setErrorApp } from \"./app_reducer\"\nimport { AppRootStateType } from \"../store\"\n\ntype MathType = {\n    id: number\n    first_val: number\n    choise_operator_id?: number | null\n\n}\ntype EqualType = {\n    display_value: string\n    choise_operator_id: number | null\n    first_val: number | null\n}\ntype button = {\n    id: number\n    val: string\n}\nexport type initialStateType = {\n    display_value: string | null\n    buttons: Array<button>\n    operators: Array<button>\n    choise_operator_id: number | null\n    first_val: number | null\n    second_val: number | null,\n    equal_val: number | null\n}\n\nconst initialState: initialStateType = {\n    display_value: '0',\n    buttons: [\n        { id: 1, val: '1' },\n        { id: 2, val: '2' },\n        { id: 3, val: '3' },\n        { id: 4, val: '4' },\n        { id: 5, val: '5' },\n        { id: 6, val: '6' },\n        { id: 7, val: '7' },\n        { id: 8, val: '8' },\n        { id: 9, val: '9' },\n        { id: 0, val: '0' },\n        { id: 10, val: '.' }\n    ],\n    operators: [\n        { id: 11, val: '/' },\n        { id: 12, val: '*' },\n        { id: 13, val: '+' },\n        { id: 14, val: '-' },\n        { id: 15, val: '=' }\n    ],\n    choise_operator_id: null,\n    first_val: null,\n    second_val: null,\n    equal_val: null\n}\n\n\nexport const CalcThunk = createAsyncThunk('calculator/CalcThunk', (val: string | null, { getState, dispatch }) => {\n    try {\n        const { calc } = getState() as AppRootStateType\n        calc.display_value!.length > 8 ? dispatch(setErrorApp({ error: 'dispaly a long' })) : dispatch(displayShow({ val }))\n        dispatch(setEqual({ setEq: null }))\n    }\n    catch (e) {\n        // const err = e as Error | AxiosError\n        // handleError(err, thunkAPI.dispatch)\n        // thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n    }\n})\n\nexport const MathCoutingThunk = createAsyncThunk('calculator/MathCoutingThunk',\n    ({ id, first_val }: MathType, { getState, dispatch }) => {\n        try {\n            dispatch(operator_counting({ id, first_val }))\n            dispatch(displayShow({ val: null }))\n        }\n        catch (e) {\n            // const err = e as Error | AxiosError\n            // handleError(err, thunkAPI.dispatch)\n            // thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n        }\n    })\n\nexport const EqualThunk = createAsyncThunk('calculator/EqualThunk',\n    ({ display_value, choise_operator_id, first_val }: EqualType, { getState, dispatch }) => {\n        try {\n            dispatch(CalcThunk(null))\n            let equal = 0\n            if (choise_operator_id === 11) equal = first_val! / Number(display_value)\n            if (choise_operator_id === 12) equal = first_val! * Number(display_value)\n            if (choise_operator_id === 13) equal = first_val! + Number(display_value)\n            if (choise_operator_id === 14) equal = first_val! - Number(display_value)\n            if (display_value === '0' && choise_operator_id === 11) {\n                dispatch(setErrorApp({\n                    error: 'What\\'s up man? Do you really want to do this ? '\n                }))\n                dispatch(CalcThunk(null))\n            } else {\n                Number.isInteger(equal) ? dispatch(CalcThunk(equal.toString())) : dispatch(CalcThunk(equal.toFixed(2)))\n            }\n            dispatch(setEqual({ setEq: equal }))\n\n        }\n        catch (e) {\n            // const err = e as Error | AxiosError\n            // handleError(err, thunkAPI.dispatch)\n            // thunkAPI.dispatch(setStatusApp({ status: 'failed' }))\n        }\n    })\n\nconst slice = createSlice({\n    name: 'calculator',\n    initialState,\n    reducers: {\n        displayShow(state, action: PayloadAction<{ val: string | null }>) {\n            console.log(state.equal_val);\n            console.log(action.payload.val);\n\n\n\n\n            if (action.payload.val === null) { state.display_value = '0' }\n            else {\n                if (state.equal_val !== null) { state.display_value = action.payload.val }\n                else {\n                    state.display_value = action.payload.val !== '.' &&\n                        state.display_value === '0'\n                        ? action.payload.val\n                        : state.display_value! + action.payload.val\n                }\n            }\n        },\n        operator_counting(state, action: PayloadAction<{ id: number, first_val: number }>) {\n            state.first_val = action.payload.first_val\n            state.choise_operator_id = action.payload.id\n        },\n        setEqual(state, action: PayloadAction<{ setEq: number | null }>) {\n            console.log(action.payload.setEq);\n            state.equal_val = action.payload.setEq\n        }\n    }\n})\n\nexport const CalculatorReducer = slice.reducer\nexport const { operator_counting, displayShow, setEqual } = slice.actions\n\nexport type CalcActionsType = MathCountType | DisplayShowType | SetEqualType\nexport type MathCountType = ReturnType<typeof operator_counting>\nexport type DisplayShowType = ReturnType<typeof displayShow>\nexport type SetEqualType = ReturnType<typeof setEqual>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}